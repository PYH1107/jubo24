搜名字(firstName, lastName) 直接去 DB 撈

#2.
class Name(BaseModel):
    lastName: str
    firstName: str


@app.post("/search_patients_vitals", response_model=List[Dict])
async def search_patients_vitals(name: Name):
    query = {"lastName": name.lastName, "firstName": name.firstName}
    patient_ids = patients_collection.find(query, {"_id": 1})
    results = []
    for patient in patient_ids:
        patient_data = {"patient_id": str(patient["_id"])}
        vitals = list(vitalsigns_collection.find({"patient_id": patient["_id"]}))
        patient_data["vitals"] = vitals
        results.append(patient_data)
    if not results:
        raise HTTPException(status_code=404, detail="No patient found")
    return results
