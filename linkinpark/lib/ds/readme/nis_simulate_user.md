# NIS Simulate User
This toolkit is used to log in Jubo's Nursing Information System (NIS) as 
user and interact with NIS API's through the returned token.

## Outline
- [Features](#features)
- [Usage](#usage)
- [Dependencies](#dependencies)
- [Limitations](#limitations)

## Features
- Log in to Jubo's NIS via the provided username and password to get the 
  API token.
- Upload file's to cloud storage space and get the uploaded file id.
- Write records by posting the content to related module's API.

## Usage
1. Get API token by account and password.
    * Connect to NIS. <br>
      (The default environment will be "demo")
      ```python
      from linkinpark.lib.ds.nis_simulate_user import NisSimulateUser
      
      user = NisSimulateUser(ACCOUNT, PASSWORD)
      ```
    * Connect to a specific NIS environment. <br> 
      *(Currently only environment "release" and "demo" are supported. 
      Hence, the "ENV" variable should be replaced by ether "prod" for 
      release or "aids" for demo.)*
      ```python
      from linkinpark.lib.ds.nis_simulate_user import NisSimulateUser
      
      user = NisSimulateUser(ACCOUNT, PASSWORD, ENV)
      ```
2. Upload files to NIS cloud storage and get the file id.
    * Uploading file by default settings. <br>
      *(In most usage case, you will need the returned file_id to relating 
      the uploaded file to a record.)*
      ```python
      file_id = user.upload_file(FILE)
      ```
    * Uploading file without default file names. <br>
      *(Use this method for changing the file name before uploading or for 
      those files without assigned file names. Most file generated by code 
      are by default without filenames.)*
      ```python
      file_id = user.upload_file(FILE, FILE_NAME)
      ```
    * Uploading file with assigned file format type. <br>
      *(By default the method will use the suffix of the file name to guess 
      the MIMETYPES of the file. However, for some reason if someone wants 
      to assign specific MIMETYPES to the file may use this method. Bear in 
      mind being caution while using this method, since changing the 
      MIMETYPES of file may lead to unexpected result in some cases.)*
      ```python
      file_id = user.upload_file(FILE, FILE_NAME, MIMETYPES)
      ```
3. Writing record to NIS by API's.
    * Inserting data to NIS standard modules.
      ```python
      user = NisSimulateUser(USER, PASSWORD)
      module = "MODULE_NAME"
      data = {"FIELD_NAME": VALUE}
      user.write_record(module, data)
      ```
    * Inserting data to NIS customize forms.
      ```python
      user = NisSimulateUser(USER, PASSWORD)
      module = "customizeForm"
      form_id = "CUSTOMIZE_FORM_ID"
      patient = "PATIENT_ID"
      data = {"FIELD_NAME": VALUE}
      user.write_record(module, data, form_id, patient)
      ```
## Dependencies
- [Python-mimetypes - Map filenames to MIME types](https://docs.python.org/3.7/library/mimetypes.html)
- [Request - Python HTTP for Humans](https://pypi.org/project/requests/)
- [Python-io - Core tools for working with streams](https://docs.python.org/3.7/library/io.html)

## Limitations
- This package is not fully tested on all NIS modules. *(Testing it on all 
  modules are extremely difficult, since the NIS modules are still growing 
  due to high demand.)* Therefore, some unexpected behaviours might 
  appeared while applying it to specific modules. Please do not hesitate to 
  contact the POC of this package in such kinds of situation.   