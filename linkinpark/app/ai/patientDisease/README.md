# Patient Disease Prediction
POC: [Jerry Lin](mailto:jerrylin@jubo.health)

The API is designed to provide predicted probabilities generated by an AI model. This service utilizes the patient knowledge graph dataset to offer a valuable solution that involves training a model to predict the risk of 15 different diseases. By offering this service, individuals are empowered to take proactive steps in seeking medical attention and gaining advanced insights into their health status.


## Outline
- [Patient Disease Prediction](#patient-disease-prediction)
  - [Outline](#outline)
  - [Features](#features)
  - [Usage](#usage)
  - [1. Default Document:](#1-default-document)
    - [Endpoint](#endpoint)
    - [Description:](#description)
  - [2. Predict result based on patient ID](#2-predict-result)
  - [3. Predict result based on patient features](#3-predict-result-based-on-patient-features)
  - [Dependencies](#dependencies)


## Features
- By providing required information, the predicted probability will be 
  returned.


## Usage
- This service was built with the FastAPI framework. For detail usage please refer to the online doc generated by the framework.

## 1. Default Document: 
### Endpoint
- http://127.0.0.1:5000/docs
### Description:
The root endpoint of the API access default documentation. This documentation has been generated using the FastAPI framework.

## 2. Predict result based on patient ID

### Endpoint
- http://127.0.0.1:5000/predict/route1

### Input

To predict disease probabilities, you need to provide a patient ID as input. This patient ID should be included in the request payload.

**Input Format:**

```json
{
  "patient_id": "5d7f6b463ae64d002d8275ad"
}
```

**Output Format**

```json
{
  "medicalHistory_HighBP": 0.9039,
  "medicalHistory_Diabetes": 0.6957,
  "medicalHistory_Dementia": 0.7499,
  "medicalHistory_CVD": 0.1676,
  "medicalHistory_COPD": 0.0323,
  "medicalHistory_CVA": 0.7924,
  "medicalHistory_Arthritis": 0.0704,
  "medicalHistory_UTI": 0.649,
  "medicalHistory_HeartDisease": 0.6221,
  "medicalHistory_BPH": 0.0018,
  "medicalHistory_KidneyDisease": 0.2966,
  "medicalHistory_PN": 0.0905,
  "medicalHistory_Cancer": 0.8546,
  "medicalHistory_Neurosis": 0.0235,
  "medicalHistory_Parkinson": 0.4481
}
```

## 3. Predict result based on patient features

### Endpoint
- http://127.0.0.1:5000/predict/route2

### Input

To predict disease probabilities, you need to provide patient's features as input.

**Input Format:**

```json
{
  "age": "20",
  "weight": "70",
  "height": "170",
}
```

**Output Format**

```json
{
  "medicalHistory_HighBP": 0.9039,
  "medicalHistory_Diabetes": 0.6957,
  "medicalHistory_Dementia": 0.7499,
  "medicalHistory_CVD": 0.1676,
  "medicalHistory_COPD": 0.0323,
  "medicalHistory_CVA": 0.7924,
  "medicalHistory_Arthritis": 0.0704,
  "medicalHistory_UTI": 0.649,
  "medicalHistory_HeartDisease": 0.6221,
  "medicalHistory_BPH": 0.0018,
  "medicalHistory_KidneyDisease": 0.2966,
  "medicalHistory_PN": 0.0905,
  "medicalHistory_Cancer": 0.8546,
  "medicalHistory_Neurosis": 0.0235,
  "medicalHistory_Parkinson": 0.4481
}
```

### Example Using curl
```shell
curl -X 'POST' \
  'http://127.0.0.1:5000/predict/route1' \
  -H 'accept: application/json' \
  -H 'Content-Type: application/json' \
  -d '{
  "patient_id": "5d7f6b463ae64d002d8275ad"
}'
```




## Dependencies
- [FastAPI - framework, high performance, easy to learn, fast to code, ready 
for production](https://fastapi.tiangolo.com/)
- [Uvicorn - The lightning-fast ASGI server](https://www.uvicorn.org/)
- [pickle - Binary protocols for serializing and de-serializing a Python object structure](https://docs.python.org/3/library/pickle.html)
- [pydantic - Data validation and settings management using python type hints](https://docs.pydantic.dev/1.10/)
